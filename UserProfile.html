<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon"
        href="https://static.vecteezy.com/system/resources/previews/017/743/717/non_2x/instagram-icon-logo-free-png.png"
        type="image/x-icon">
    <script src="https://kit.fontawesome.com/174a9c1444.js" crossorigin="anonymous"></script>
</head>

<body>
    <div id="profileScreen">

        <div class="mainProfileContainer">
            <div class="navbarWrapper">
                <div class="instLogoContainer">
                    <img src="./images/instalogo.png" alt="">
                </div>

                <div class="navlinkWrapper">
                    <div class="navlink" onclick="window.location.href='./index.html'">
                        <span class="nlIcon"><i class="fa-solid fa-house"></i></span>
                        <span class="navlinkName activeLink">Home</span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-solid fa-magnifying-glass"></i> </span>
                        <span class="navlinkName"> Search </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"> <i class="fa-regular fa-compass"></i></span>
                        <span class="navlinkName"> Explore </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-solid fa-clapperboard"></i> </span>
                        <span class="navlinkName"> Reels </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-regular fa-message"></i> </span>
                        <span class="navlinkName"> Messages </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-regular fa-heart"></i> </span>
                        <span class="navlinkName"> Notifications </span>
                    </div>
                    <div class="navlink" onclick="window.location.href='./addProfilePost.html'">
                        <span class="nlIcon"><i class="fa-regular fa-square-plus"></i> </span>
                        <span class="navlinkName"> create </span>
                    </div>
                    <div class="navlink" onclick="window.location.href='./UserProfile.html'">
                        <span class="nlIcon"> <i class="fa-regular fa-user"></i> </span>
                        <span class="navlinkName" id="switch">Profile </span>
                    </div>

                    <div id="logout" class="navlink"></div>

                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-solid fa-bars"></i></span>
                        <span class="navlinkName"> More </span>
                    </div>
                </div>

            </div>

            <div class="rightMainProfileContainer">
                <div class="UProfileTopSection" id="finalProfile">
                    <div class="UProfileLeftSection">
                        <div class="UPofileImag" id="profileImage">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQjYmlp9JDeNMaFZzw9S3G1dVztGqF_2vq9nA&usqp=CAU"
                                alt="">
                        </div>

                    </div>
                    <div class="UProfileRightSection">
                        <div class="TopUProfileOptions">
                            <span class="UInstaID" id="profileSubname">Name </span>
                            <span class="EditProfileOption" onclick="window.location.href='addProfileBio.html'">edit
                                profile </span>
                            <span class="UProfileSettingOption"><i class="fa-solid fa-gear"></i></span>
                        </div>

                        <div class="MiddleProfileOptions">
                            <div class="postTxtCountWrap">
                                <span class="PostCount"> 3</span>
                                <span class="PostTxt">posts</span>
                            </div>
                            <div class="followersTxtCountWrap">
                                <span class="followersCount"> 100</span>
                                <span class="followersTxt">followers</span>
                            </div>
                            <div class="followingTxtCountWrap">
                                <span class="followingCount"> 90</span>
                                <span class="followingTxt">following</span>
                            </div>

                        </div>

                        <div class="UProfileBioWrapper" id="ProfileBio">
                            <!-- <div class="UserSubName" > M</div> -->
                            <div class="UserBio"> </div>
                        </div>
                    </div>

                </div>

                <div class="UProfileBottomSection">
                    <div class="ProfilePostOptionsWrap">
                        <div class="ProfileOptionConatainer activePOpt">
                            <span class="postOptIcon"><i class="fa-solid fa-table-cells"></i></span>
                            <span class="postOptName">posts </span>
                        </div>
                        <div class="ProfileOptionConatainer">
                            <span class="postOptIcon"><i class="fa-regular fa-bookmark"></i></span>
                            <span class="postOptName">saved </span>
                        </div>
                        <div class="ProfileOptionConatainer">
                            <span class="postOptIcon"><i class="fa-solid fa-clipboard-user"></i></span>
                            <span class="postOptName">tagged </span>
                        </div>
                    </div>

                    <div class="mainProfilePostContainer" id="finalPost">
                        <div class="PflPostImage" id="postImage">
                            <!-- <img src="./images/profilepost2.jpg" alt=""> -->
                            <div class="overlay ">
                                <span class="overlayIcon">
                                    <span class="ovicon"><i class="fa-solid fa-heart"></i>10</span>
                                    <span class="ovicon"><i class="fa-solid fa-comment"></i>3</span>
                                </span>
                            </div>
                        </div>

                    </div>

                </div>

                <!-- footer -->
                <div class="footer">
                    <div class="footerWrapper">
                        <span class="footerLink"> Meta</span>
                        <span class="footerLink"> about</span>
                        <span class="footerLink"> blog </span>
                        <span class="footerLink"> jobs</span>
                        <span class="footerLink"> help</span>
                        <span class="footerLink"> API</span>
                        <span class="footerLink"> privacy</span>
                        <span class="footerLink"> terms</span>
                        <span class="footerLink"> Top Accounts</span>
                        <span class="footerLink"> locations</span>
                        <span class="footerLink"> instagram lite</span>
                        <span class="footerLink"> contact uploading & non-users</span>
                        <span class="footerLink"> meta verified</span>
                    </div>

                    <div class="copyrightFooter">
                        <span class="footerLink">English</span>
                        <span class="footerLink">Â© 2023 Instagram from Meta</span>
                    </div>
                </div>


            </div>

        </div>

    </div>


    <script>
        window.onload = function () {
            // alert("working")
            var currentUser = JSON.parse(localStorage.getItem("InstaCurrentUser"))
            // console.log(currentUser,"current user");
            if (!!currentUser) {
                // alert(currenUser,"username")
                var logoutDiv = document.getElementById("logout")
                var divfromHtml = document.getElementById("switch");
                // console.log(divfromHtml, "divfromhtml");
                // var h1=document.createElement("h1");
                // h1.innerText="Mayuri"
                // divfromHtml.append(h1)
                var button = '<span class="nlIcon"><i class="fa-solid fa-arrow-right-from-bracket id=logout-icon"></i></span> <span onclick="logout()" class="navlinkName">Logout</span>'
                var name = `<span>${currentUser.userName}</span>`;
                divfromHtml.innerHTML = name;
                logoutDiv.innerHTML = button;

            }
            //  else {
            //     alert("current user absent")
            // }



            // user profile-Bio section

            var currentUser = JSON.parse(localStorage.getItem("InstaCurrentUser"))

            var userData = JSON.parse(localStorage.getItem("InstaUsers"))
            var divToAppendprofileImage = document.getElementById("profileImage")
            var divToAppendprofileSubname = document.getElementById("profileSubname")
            var divToAppendProfileBio = document.getElementById("ProfileBio")
            var divToAppendfinalProfile = document.getElementById("finalProfile")

            if (!!currentUser) {
                var finalProfileBio;
                for (var i = 0; i < userData.length; i++) {
                    if (currentUser.userEmail === userData[i].userEmail) {
                        finalProfileBio = userData[i].userbio
                    }
                    console.log(finalProfileBio);
                }
            }
            var forbioimg = ""
            var forbioname = ""
            var forbiobio = ""
            var finalstrBio = ` 
                    <div class="UProfileLeftSection" >
                        <div class="UPofileImag" id="profileImage">
                            <img src="${finalProfileBio.pimage}"
                                alt="">
                        </div>

                    </div>
                    <div class="UProfileRightSection">
                        <div class="TopUProfileOptions">
                            <span class="UInstaID" id="profileSubname">${finalProfileBio.pSubname} </span>
                            <span class="EditProfileOption" onclick="window.location.href='addProfileBio.html'">edit
                                profile </span>
                            <span class="UProfileSettingOption"><i class="fa-solid fa-gear"></i></span>
                        </div>

                        <div class="MiddleProfileOptions">
                            <div class="postTxtCountWrap">
                                <span class="PostCount"> 3</span>
                                <span class="PostTxt">posts</span>
                            </div>
                            <div class="followersTxtCountWrap">
                                <span class="followersCount"> 100</span>
                                <span class="followersTxt">followers</span>
                            </div>
                            <div class="followingTxtCountWrap">
                                <span class="followingCount"> 90</span>
                                <span class="followingTxt">following</span>
                            </div>

                        </div>

                        <div class="UProfileBioWrapper" id="ProfileBio">
                            <!-- <div class="UserSubName" > M</div> -->
                            <div class="UserBio">${finalProfileBio.bio}</div>
                        </div>
                    </div>

                `


            divToAppendprofileImage.innerHTML = forbioimg;
            divToAppendprofileSubname.innerHTML = forbioname;
            divToAppendProfileBio.innerHTML = forbiobio;
            divToAppendfinalProfile.innerHTML = finalstrBio

            //         var currentUser = JSON.parse(localStorage.getItem("InstaCurrentUser"))

            //         var userData = JSON.parse(localStorage.getItem("InstaUsers"))
            //         var userBio = JSON.parse(localStorage.getItem("instagramProfile"))
            //         for (var i = 0; i < userData.length; i++) {
            //             if (currentUser.userEmail === userData[i].userEmail) {
            //                 // alert("got")
            //                 if (userData[i].bio == undefined) {
            //                     userData[i].bio = userBio[i];
            //                 }
            //                 // alert("profile created.")
            //                 // window.location.href = './cart.html'
            //             }
            //         }
            //         localStorage.setItem("InstaUsers", JSON.stringify(userData))

            //         var divToAppendprofileImage = document.getElementById("profileImage")
            //         var divToAppendprofileSubname = document.getElementById("profileSubname")
            //         var divToAppendProfileBio = document.getElementById("ProfileBio")
            //         var divToAppendfinalProfile = document.getElementById("finalProfile")
            //         // var divToAppendfinalUsername = document.getElementById("username")



            //         var products;
            //         for (var i = 0; i < userData.length; i++) {
            //             if (currentUser.userEmail == userData[i].userEmail) {
            //                 products = userBio;
            //                 // products = userData[i].push(userBio);
            //             }
            //         }
            //         console.log(products, "bio info here");
            //         // var finalData = "";



            //         var finalProfileImage = "";
            //         var finalProfileSubname = "";
            //         var finalProfileBio = "";
            //         var finalProfile = "";

            //         for (var i = 0; i < products.length; i++) {
            //             finalProfile = finalProfileImage = `
            //                         <div class="UPofileImag">
            //                         <img src="${products[i].pimage}" alt="">
            //                     </div>
            //             `
            //             finalProfileSubname = `${products[i].pSubname}`
            //             finalProfileBio = `${products[i].bio}`
            //         }

            //         // `<div> <img src='${products[i].proImage}'/><br/>
            //         //             <h2>${products[i].proName}</h2><br/>
            //         //             <h3>${products[i].proPrice}</h3>`

            //         divToAppendprofileImage.innerHTML = finalProfileImage;
            //         divToAppendprofileSubname.innerHTML = finalProfileSubname;
            //         divToAppendProfileBio.innerHTML = finalProfileBio;
            //         divToAppendfinalProfile.innerHTML = finalProfile



            //         // user profile post section




            var userPosts = JSON.parse(localStorage.getItem("InstProfilePosts"))
            var currentUser = JSON.parse(localStorage.getItem("InstaCurrentUser"))
            var userData = JSON.parse(localStorage.getItem("InstaUsers"))


            var finaluserPost=[];
            for (var i = 0; i < userData.length; i++) {
                if (userData[i].userEmail == currentUser.userEmail) {
                    finaluserPost =userPosts;
                }
                console.log(finaluserPost);
            }

            for (var i = 0; i < userData.length; i++) {
                if (currentUser.userEmail == userData[i].userEmail) {
                    if (userData[i].post === undefined) {
                        userData[i].post = "";
                    }
                    else {
                        userData[i].post = finaluserPost;
                    }

                }

            }
            localStorage.setItem("InstaUsers", JSON.stringify(userData));

            var AllFinalPost;
            for (var i = 0; i < userData.length; i++) {
                if (currentUser.userEmail == userData[i].userEmail) {
                    AllFinalPost = userData[i].post;
                }
            }

            var DivForAllPost = document.getElementById("finalPost");
            // var profilepostls = JSON.parse(localStorage.getItem("InstProfilePosts"));
            var UserProfileFinalPost = "";

            for (var i = 0; i < AllFinalPost.length; i++) {
                UserProfileFinalPost += `
                        
                        
                        <div class="PflPostImage" id="postImage">
                             <img src="${AllFinalPost[i].UserPImg}" alt="">
                            <div class="overlay ">
                                <span class="overlayIcon">
                                    <span class="ovicon"><i class="fa-solid fa-heart"></i>10</span>
                                    <span class="ovicon"><i class="fa-solid fa-comment"></i>3</span>
                                </span>
                            </div>
                        </div>`
            }


            DivForAllPost.innerHTML = UserProfileFinalPost;


            // for (var i = 0; i < userData.length; i++) {
            //             if (currentUser.userEmail === userData[i].userEmail) {
            //                 // alert("got")
            //                 if (userData[i].posts == undefined) {
            //                     userData[i].posts = userPosts[i];
            //                 }
            //                 // alert("profile created.")
            //                 // window.location.href = './cart.html'
            //             }
            //         }
            //         localStorage.setItem("InstaUsers", JSON.stringify(userData))

            //         var divToAppendPostImage = document.getElementById("postImage")
            //         // var divToAppendprofileSubname = document.getElementById("profileSubname")
            //         // var divToAppendProfileBio = document.getElementById("ProfileBio")
            //         var divToAppendfinalPost = document.getElementById("finalPost")
            //         // var divToAppendfinalUsername = document.getElementById("username")



            //         var products;
            //         for (var i = 0; i < userData.length; i++) {
            //             if (currentUser.userEmail == userData[i].userEmail) {
            //                 products = userPosts;
            //             }
            //         }
            //         console.log(products, "posts info here");
            //         // var finalData = "";



            //         var finalPostImage = "";
            //         // var finalProfileSubname = "";
            //         // var finalProfileBio = "";
            //         var finalPost = "";

            //         for (var i = 0; i < products.length; i++) {
            //             finalPost += divToAppendPostImage = ` 

            //             <div class="PflPostImage" id="postImage">
            //                         <img src="${products[i].UserPImg}"> 
            //                         <div class="overlay ">
            //                             <span class="overlayIcon">
            //                                 <span class="ovicon"><i class="fa-solid fa-heart"></i>10</span>
            //                                 <span class="ovicon"><i class="fa-solid fa-comment"></i>3</span>
            //                             </span>
            //                         </div>
            //                     </div>


            // `
            //             // finalProfileSubname = `${products[i].pSubname}`
            //             // finalProfileBio = `${products[i].bio}`
            //         }

            //         // `<div> <img src='${products[i].proImage}'/><br/>
            //         //             <h2>${products[i].proName}</h2><br/>
            //         //             <h3>${products[i].proPrice}</h3>`

            //         divToAppendPostImage.innerHTML = finalPostImage;
            //         // divToAppendprofileSubname.innerHTML = finalProfileSubname;
            //         // divToAppendProfileBio.innerHTML = finalProfileBio;
            //         divToAppendfinalPost.innerHTML = finalPost;



        }

        function logout() {
            alert("Logout successful.")
            localStorage.removeItem("InstaCurrentUser")
            window.location.reload()


        }
    </script>
</body>

</html>