<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="https://static.vecteezy.com/system/resources/previews/017/743/717/non_2x/instagram-icon-logo-free-png.png" type="image/x-icon">
    <script src="https://kit.fontawesome.com/174a9c1444.js" crossorigin="anonymous"></script>
</head>

<body>
    <div id="addPostScreen">
        <div class="AddPostSreenContainer">

            <div class="navbarWrapper">
                <div class="instLogoContainer">
                    <img src="./images/instalogo.png" alt="">
                </div>

                <div class="navlinkWrapper">
                    <div class="navlink" onclick="window.location.href='./index.html'">
                        <span class="nlIcon"><i class="fa-solid fa-house"></i></span>
                        <span class="navlinkName activeLink">Home</span>
                    </div>
                    <div class="navlink" onclick="openNav()">
                        <span class="nlIcon"><i class="fa-solid fa-magnifying-glass"></i> </span>
                        <span class="navlinkName">Search </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"> <i class="fa-regular fa-compass"></i></span>
                        <span class="navlinkName"> Explore </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-solid fa-clapperboard"></i> </span>
                        <span class="navlinkName"> Reels </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-regular fa-message"></i> </span>
                        <span class="navlinkName"> Messages </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-regular fa-heart"></i> </span>
                        <span class="navlinkName"> Notifications </span>
                    </div>
                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-regular fa-square-plus"></i> </span>
                        <span class="navlinkName"> create </span>
                    </div>
                    <div class="navlink" onclick="window.location.href='./UserProfile.html'">
                        <span class="nlIcon"> <i class="fa-regular fa-user"></i> </span>
                        <span class="navlinkName" id="switch">Profile </span>
                    </div>

                    <div id="logout" class="navlink"></div>

                    <div class="navlink">
                        <span class="nlIcon"><i class="fa-solid fa-bars"></i></span>
                        <span class="navlinkName"> More </span>
                    </div>

                    <!-- --------------------------------->

                    <div id="mySidenav" class="sidenav">
                        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>

                        <div class="slidenavContsiner">
                            <div class="leftSlideNav">
                                <div class="smaallinstalogowrap">
                                    <img src="./images/sminstalogo.png" alt="">
                                </div>

                                <div class="navlinkWrapper">
                                    <div class="navlink" onclick="window.location.href='./index.html'">
                                        <span class="nlIcon"><i class="fa-solid fa-house"></i></span>

                                    </div>
                                    <div class="navlink">
                                        <span class="nlIcon"><i class="fa-solid fa-magnifying-glass"></i> </span>
                                    </div>
                                    <div class="navlink">
                                        <span class="nlIcon"> <i class="fa-regular fa-compass"></i></span>
                                    </div>
                                    <div class="navlink">
                                        <span class="nlIcon"><i class="fa-solid fa-clapperboard"></i> </span>
                                    </div>
                                    <div class="navlink">
                                        <span class="nlIcon"><i class="fa-regular fa-message"></i> </span>
                                    </div>
                                    <div class="navlink">
                                        <span class="nlIcon"><i class="fa-regular fa-heart"></i> </span>
                                    </div>
                                    <div class="navlink">
                                        <span class="nlIcon"><i class="fa-regular fa-square-plus"></i> </span>
                                    </div>
                                    <div class="navlink" onclick="window.location.href='./UserProfile.html'">
                                        <span class="nlIcon"> <i class="fa-regular fa-user"></i> </span>
                                        <span class="navlinkName" id="switch"></span>
                                    </div>

                                    <div id="logout" class="navlink"></div>

                                    <div class="navlink">
                                        <span class="nlIcon"><i class="fa-solid fa-bars"></i></span>
                                    </div>
                                </div>
                            </div>


                            <div class="rightslideSearch">
                                <div class="searchbarWrapper">
                                    <div class="searchHeader">
                                        <h2 class="searchslTxt">Search</h2>
                                        <input id="searchbar" onkeyup="search_user()" type="search" autocomplete="off"
                                            name="search" placeholder="Search.." class="searchslinputf">
                                    </div>
                                    <div class="searchFooter">
                                        <div class='list' id="show">
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>


            <div class="right-add-post-container">

                <h1 class="settingshead">Settings</h1>

                <div class="settingConatiner">
                    <div class="leftSettingsWrapper">
                        <p class="pwrap">
                            <span class="metalogowrap">
                                <img src="./images/meta-logo.png" alt="">
                            </span>
                            <span class="metattxtep"> Meta</span>
                        </p>
                        <p class="acConatainer">accounts Center</p>
                        <p class="metasettingContent"> Manage your connected experiences and account settings across
                            Meta technologies.</p>
                        <p class="leftTopMetaOpt">
                            <span class="leftTopMetaOptIcon"><i class="fa-regular fa-user"></i></span>
                            <span class="leftTopMetaOptContent">Personal details</span>
                        </p>
                        <p class="leftTopMetaOpt">
                            <span class="leftTopMetaOptIcon"><i class="fa-regular fa-square-check"></i></span>
                            <span class="leftTopMetaOptContent">Password and security</span>
                        </p>
                        <p class="leftTopMetaOpt">
                            <span class="leftTopMetaOptIcon"><i class="fa-brands fa-adversal"></i></span>
                            <span class="leftTopMetaOptContent">Ad preferences</span>
                        </p>
                        <p class="ACenterTxt">See more in Accounts Center</p>
                        <hr class="hrlineSetting">
                        <p class="slefteditPr">Edit profile</p>
                        <p class="leftbottomp">Apps and websites</p>
                        <p class="leftbottomp">Email notifications</p>
                        <p class="leftbottomp">Push notifications</p>
                        <p class="leftbottomp">What you see</p>
                        <p class="leftbottomp">Who can see your content</p>
                        <p class="leftbottomp">How other can interact with you</p>
                        <p class="leftbottomp">Supervision</p>
                        <p class="leftbottomp">Help</p>
                        <p class="swpTxt">Switch to professional account</p>



                    </div>

                    <div class="rightSettingsWrapper">

                        <h1 class="srsEditPrTxt">Edit profile</h1>

                        <div class="settingProfileImgnameWrapper" id="finalProfile">
                            <div class="leftSettingPrImgside">
                                <div class="setPrImageContainer" id="profileImage">
                                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQjYmlp9JDeNMaFZzw9S3G1dVztGqF_2vq9nA&usqp=CAU"
                                        alt="">
                                </div>
                            </div>
                            <div class="rifgtsettingNameSide">
                                <div class="setPrUserName" id="profileSubname">name </div>
                                <div class="setPrUserName" id="ProfileBio">bio </div>


                            </div>

                        </div>

                        <form action="" onsubmit="createProfile(event)" class="editProfileFormWrapper">
                            <div class="setting_input_wrap">
                                <label class="setLable">Username</label>
                                <input type="text" id="pSubname" class="setInputfield" required autocomplete="off" />
                            </div>
                            <div class="setting_input_wrap">
                                <label class="setLable">Profie Photo </label>
                                <input type="text" id="pimage" class="setInputfield" required autocomplete="off" />
                            </div>
                            <div class="setting_input_wrap">
                                <label class="setLable">Bio</label>
                                <textarea rows="4" cols="50" id="bio" class="setInputfield" placeholder="">
                                </textarea>
                            </div>
                            <div class="setting_input_wrap">
                                <label class="setLable"></label>
                                <span class="setInputfield">
                                    <input type="submit" value="Submit" class="setRSubBtn ">
                                </span>
                            </div>



                        </form>

                    </div>

                </div>

                <div class="Settingfooter">
                    <div class="footerWrapper">
                        <span class="footerLink"> Meta</span>
                        <span class="footerLink"> about</span>
                        <span class="footerLink"> blog </span>
                        <span class="footerLink"> jobs</span>
                        <span class="footerLink"> help</span>
                        <span class="footerLink"> API</span>
                        <span class="footerLink"> privacy</span>
                        <span class="footerLink"> terms</span>
                        <span class="footerLink"> Top Accounts</span>
                        <span class="footerLink"> locations</span>
                        <span class="footerLink"> instagram lite</span>
                        <span class="footerLink"> contact uploading & non-users</span>
                        <span class="footerLink"> meta verified</span>
                    </div>

                    <div class="copyrightFooter">
                        <span class="footerLink">English</span>
                        <span class="footerLink">© 2023 Instagram from Meta</span>
                    </div>
                </div>

            </div>




        </div>

    </div>





    <script>


        window.onload = function () {
            // alert("working")
            var currentUser = JSON.parse(localStorage.getItem("InstaCurrentUser"))
            // console.log(currentUser,"current user");
            if (!!currentUser) {
                // alert(currenUser,"username")
                var logoutDiv = document.getElementById("logout")
                var divfromHtml = document.getElementById("switch");
                // console.log(divfromHtml, "divfromhtml");
                // var h1=document.createElement("h1");
                // h1.innerText="Mayuri"
                // divfromHtml.append(h1)
                var button = '<span class="nlIcon"><i class="fa-solid fa-arrow-right-from-bracket id=logout-icon"></i></span> <span onclick="logout()" class="navlinkName">Logout</span>'
                var name = `<span>${currentUser.userName}</span>`;
                divfromHtml.innerHTML = name;
                logoutDiv.innerHTML = button;

            }
            //  else {
            //     alert("current user absent")
            // }



            // user profile-Bio section

            var currentUser = JSON.parse(localStorage.getItem("InstaCurrentUser"))

            var userData = JSON.parse(localStorage.getItem("InstaUsers"))
            var divToAppendprofileImage = document.getElementById("profileImage")
            var divToAppendprofileSubname = document.getElementById("profileSubname")
            var divToAppendProfileBio = document.getElementById("ProfileBio")
            var divToAppendfinalProfile = document.getElementById("finalProfile")

            if (!!currentUser) {
                var finalProfileBio;
                for (var i = 0; i < userData.length; i++) {
                    if (currentUser.userEmail === userData[i].userEmail) {
                        finalProfileBio = userData[i].userbio
                    }
                    // console.log(finalProfileBio);
                }
            }
            var forbioimg = ""
            var forbioname = ""
            var forbiobio = ""
            var finalstrBio = ` <div class="leftSettingPrImgside">
                                <div class="setPrImageContainer" id="profileImage">
                                    <img src="${finalProfileBio.pimage}" alt="">
                                </div>
                            </div>
                            <div class="rifgtsettingNameSide">
                                <div class="setPrUserName" id="profileSubname">${finalProfileBio.pSubname} </div>
                                <div class="setPrUserbio" id="ProfileBio">${finalProfileBio.bio} </div>

                            </div>`


            divToAppendprofileImage.innerHTML = forbioimg;
            divToAppendprofileSubname.innerHTML = forbioname;
            divToAppendProfileBio.innerHTML = forbiobio;
            divToAppendfinalProfile.innerHTML = finalstrBio
        }


        function createProfile(event) {
            event.preventDefault();
            // alert("Product adding....")
            var pSubname = document.getElementById("pSubname").value;
            var pimage = document.getElementById("pimage").value;
            var bio = document.getElementById("bio").value;
            var product = { pSubname, pimage, bio };

            var currentUser = JSON.parse(localStorage.getItem("InstaCurrentUser"))
            var userData = JSON.parse(localStorage.getItem("InstaUsers"))

            for (var i = 0; i < userData.length; i++) {
                if (currentUser.userEmail == userData[i].userEmail) {
                    if (userData[i].userbio === undefined) {
                        userData[i].userbio = ""
                    } else {
                        userData[i].userbio = product;
                    }
                    alert("user bio added")
                }
            }

            localStorage.setItem("InstaUsers", JSON.stringify(userData))



            // var LS = JSON.parse(localStorage.getItem("instagramProfile")) || [];
            // LS.push(product);
            // localStorage.setItem("instagramProfile", JSON.stringify(LS));

            // alert("Profile updated")
            window.location.href = './addProfileBio.html'
            profileSubname = document.getElementById("pSubname").value = "";
            profileImage = document.getElementById("pimage").value = "";
            ProfileBio = document.getElementById("bio").value = "";
        }



    </script>

<script src="./main.js"></script>
</body>

</html>